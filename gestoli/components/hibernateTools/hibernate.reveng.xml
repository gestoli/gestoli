<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-reverse-engineering PUBLIC "-//Hibernate/Hibernate Reverse Engineering DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-reverse-engineering-3.0.dtd" >

<hibernate-reverse-engineering>

	<type-mapping>
		<sql-type jdbc-type="BOOLEAN" hibernate-type="java.lang.Boolean" />
		<sql-type jdbc-type="BIT" hibernate-type="java.lang.Boolean" />
		<sql-type jdbc-type="SMALLINT" hibernate-type="java.lang.Integer" />
		<sql-type jdbc-type="INTEGER" hibernate-type="java.lang.Integer" />
		<sql-type jdbc-type="BIGINT" hibernate-type="java.lang.Long" />
		<sql-type jdbc-type="DOUBLE" hibernate-type="java.lang.Double" />
		<sql-type jdbc-type="NUMERIC" hibernate-type="java.lang.Double"
			scale="2" />
		<sql-type jdbc-type="NUMERIC" hibernate-type="java.lang.Long"
			scale="0" />
		<sql-type jdbc-type="CHAR" hibernate-type="java.lang.String" />
		<sql-type jdbc-type="VARCHAR" hibernate-type="java.lang.String" />
	</type-mapping>

	<table-filter match-schema="public" match-name="oli_.*">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
	</table-filter>


	<table schema="public" name="oli_usuari">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.util.TreeSet</meta>
		<meta attribute="class-code"><![CDATA[
			public Set getSortedGrups() {
				return (new TreeSet(this.grups));
			} 	
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="contra" property="contrasenya"></column>
		<column name="direcc" property="direccio"></column>
		<column name="poblac" property="poblacio"></column>
		<column name="cp" property="codiPostal"></column>
		<column name="telefo" property="telefon"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_grup">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Comparator
			 */
			public int compareTo(Object g) {
				Grup grup = (Grup)g;
				return this.nom.compareTo(grup.getNom());
			}
			]]>
		</meta>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_idioma">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_usuidi_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_taxa">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<column name="codi" property="id"></column>
		<column name="codcam" property="id"></column>
		<column name="majigu" property="taxaPlantacioMajorIgual75"></column>
		<column name="menor" property="taxaPlantacioMenor75"></column>
		<column name="volum" property="taxaVolumEnvasar"></column>
		<column name="coneti" property="taxaContraEtiqueta"></column>
		<foreign-key constraint-name="oli_taxcam_fk">
			<many-to-one exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_color">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_tencol_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_arxiu">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.DecimalFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Method 'getNormalizeSize'
			 * @return
			 */
			public String getNormalizeSize() {
				double miles = 1024.0;
				double pes = tamany.doubleValue();
				String normalizeSize = "";
				if (pes != 0) {
					DecimalFormat df = new DecimalFormat();
					df.setMaximumFractionDigits(2);
					if (pes < miles) {
						normalizeSize = df.format(pes) + " Bytes";
					} else {
						pes = tamany.doubleValue() / miles;
						normalizeSize = df.format(pes) + " Kb";
						if (pes > miles) {
							pes = pes /miles;
							normalizeSize = df.format(pes) + " Mb";
						}           
					}
				}
				return normalizeSize;
			} 	
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_material_tipus_envas">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_tipus_envas">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una descripcion de un tipo de envase
			 */
			public String getNomSelect() {
				String nomSelect = this.volum.toString() + " - " + this.materialTipusEnvas.getNom() + " - " + this.color.getNom();
				return nomSelect;
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_etiquetatge">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="imafro" property="imatgeFrontal"></column>
		<column name="imapos" property="imatgePosterior"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_etiten_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_loteti_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_marca">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="denori" property="denominacioOrigen"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_tipus_establiment">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<foreign-key constraint-name="oli_esttes_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_solicitant">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="telefo" property="telefon"></column>
		<foreign-key constraint-name="oli_estsol_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_establiment">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Comparator
			 */
			public int compareTo(Object e) {
				Establiment establecimiento = (Establiment)e;
				return this.nom.compareTo(establecimiento.getNom());
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="direcc" property="direccio"></column>
		<column name="poblac" property="poblacio"></column>
		<column name="cp" property="codiPostal"></column>
		<column name="telefo" property="telefon"></column>
		<column name="numtre" property="numeroTreballadors"></column>
		<column name="superf" property="superficie"></column>
		<column name="unimes" property="unitatMesura"></column>
		<column name="tempas" property="temperaturaMaximaPasta"></column>
		<column name="cappro" property="capacitatProduccio"></column>
		<column name="envman" property="envassamentManual"></column>
		<column name="etiman" property="etiquetatManual"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
		<column name="codirb" property="codiRB"></column>
		<column name="codirc" property="codiRC"></column>
		<foreign-key constraint-name="oli_ediest_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_mdiest1_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_mdiest2_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_sdiest_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_ediest_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_anaest_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_olivicultor">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="codido" property="codiDO"></column>
		<column name="codide" property="codiDOExperimental"></column>
		<column name="direcc" property="direccio"></column>
		<column name="poblac" property="poblacio"></column>
		<column name="cp" property="codiPostal"></column>
		<column name="compte" property="compteBancari"></column>
		<column name="altado" property="altaDO"></column>
		<column name="cartil" property="cartilla"></column>
		<column name="telefo" property="telefon"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
		<column name="uidrfid" property="uidRfid"></column>
		<column name="subven" property="subvencionat"></column>
		<foreign-key constraint-name="oli_paooli_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_facoli_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_sdioli_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_finca">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
	</table>

	<table schema="public" name="oli_plantacio">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="munici" property="municipi"></column>
		<column name="poligo" property="poligon"></column>
		<column name="parcel" property="parcela"></column>
		<column name="regadi" property="regadiu"></column>
		<column name="anypl" property="anyPlantacio"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
	</table>

	<table schema="public" name="oli_descomposicio_plantacio">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="numoli" property="numeroOliveres"></column>
		<column name="superf" property="superficie"></column>
		<column name="maxprod" property="maxProduccio"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
		<foreign-key constraint-name="oli_dpodpl_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_varietat_oliva">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="autori" property="autoritzada"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_zona">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="fictic" property="fictici"></column>
		<column name="imapla" property="imatgePlanol"></column>
		<column name="defect" property="defecte"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
		<foreign-key constraint-name="oli_paozon_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_elozon_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_slozon_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_diposit">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve el tipo del icono de deposito
			 */
			public Long getTipo() {
				Long tipo = null;
				String nom = "";
				if (this.materialDiposit != null) {
					tipo = this.materialDiposit.getIcona();
				}
				return tipo;
			}

			/**
			 * Devuelve el aceite disponible en kilos
			 */
			public Double getDisponibleOliQuilos() {
				Double cantidad = null;
				if (this.getVolumActual() != null) {
					//PASAMOS A KG
					cantidad = Double.valueOf(String.valueOf((Double.valueOf("0.916").doubleValue() * this.getVolumActual().doubleValue())));
				}
			return cantidad;
			}
			]]>
		</meta>
		<primary-key>
			<generator class="native" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="codias" property="codiAssignat"></column>
		<column name="fictic" property="fictici"></column>
		<column name="capaci" property="capacitat"></column>
		<column name="observ" property="observacions"></column>
		<column name="codori" property="idOriginal"></column>
		<column name="posx" property="posicioX"></column>
		<column name="posy" property="posicioY"></column>
		<column name="volact" property="volumActual"></column>
		<column name="acides" property="acidesa"></column>
		<foreign-key constraint-name="oli_edidip_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_lotdip_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_anadip_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_dtddip_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_sdidip1_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_sdidip2_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_material_diposit">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_campanya">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_olicam_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_estcam_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_taxcam_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_factura">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
	</table>

	<table schema="public" name="oli_partida_oliva">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.DecimalFormat</meta>
		<meta attribute="extra-import">java.util.Iterator</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una descripcion de Variedad / kilos
			 */
			public boolean getQualificada() {
				boolean qualificada = true;
				if (this.descomposicioPartidesOlives != null) {
					Iterator desc = this.descomposicioPartidesOlives.iterator();
					while (desc.hasNext()) {
						DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
						if (!dpo.getDescomposicioPlantacio().getVarietatOliva().getAutoritzada().booleanValue()) {
							qualificada = false;
							break;
						}
						
					}
				}
				return qualificada;
			}

			/**
			 * Devuelve una descripcion de Variedad / kilos
			 */
			public String getVarietatsQuilos() {
				DecimalFormat numberDecimalFormat = new DecimalFormat("###,###,##0.00");
		
				String valor = "";
				double total = 0;
				if (this.descomposicioPartidesOlives != null) {
					Iterator desc = this.descomposicioPartidesOlives.iterator();
					while (desc.hasNext()) {
						DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
						if (valor != null && !"".equals(valor)) valor += "<br/>";
						valor += dpo.getDescomposicioPlantacio().getVarietatOliva().getNom() + " (" + numberDecimalFormat.format(dpo.getKilos().doubleValue()) + " kgs.)";
						total += dpo.getKilos().doubleValue();
					}
				}
				return valor;
			}
		
			/**
			 * Devuelve una descripcion de total kilos
			 */
			public String getTotalQuilos() {
				DecimalFormat numberDecimalFormat = new DecimalFormat("###,###,##0.00");
				double total = 0;
				if (this.descomposicioPartidesOlives != null) {
					Iterator desc = this.descomposicioPartidesOlives.iterator();
					while (desc.hasNext()) {
						DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
						total += dpo.getKilos().doubleValue();
					}
				}
				return numberDecimalFormat.format(total);
			}

			/**
			 * Devuelve una descripcion de total kilos
			 */
			public String getNomVarietat() {
				String nom = "";
				if (this.descomposicioPartidesOlives != null) {
					Iterator desc = this.descomposicioPartidesOlives.iterator();
					while (desc.hasNext()) {
						DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
						if(dpo.getDescomposicioPlantacio()!= null){
							DescomposicioPlantacio descompPlanta = dpo.getDescomposicioPlantacio();
							VarietatOliva varietat = descompPlanta.getVarietatOliva();
							if(varietat != null && varietat.getNom()!= null){
								if(nom!= "" && !nom.equalsIgnoreCase(varietat.getNom())){
									nom = "mezcla";
									break;
								}else{
									nom = varietat.getNom();							
								}
							}
						}				
		
					}
				}
				return nom;
			}

			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				return sdf.format(this.data);
			}

			/**
			 * Devuelve un nombre de partida
			 */
			public String getCodiAssignat() {
				return ("P(" + this.getDataFormat() + " " + hora + " " +" NUM: " + numeroEntrada + ")");
			}

			/**
			 * Devuelve un descripcion de partida
			 */
			public String getDescPartida() {
				return "(" + this.getDataFormat() + " " + hora + " " + " NUM: " + numeroEntrada + ")";
			} 

			/**
			 * Devuelve el tipo del icono de oliva de la partida
			 */
			public Long getTipo() {
				Long tipo = null;
				String nom = "";
				if (this.descomposicioPartidesOlives != null) {
					Iterator desc = this.descomposicioPartidesOlives.iterator();
					while (desc.hasNext()) {
						DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
						if (dpo.getDescomposicioPlantacio() != null) {
							DescomposicioPlantacio descompPlanta = dpo.getDescomposicioPlantacio();
							VarietatOliva varietat = descompPlanta.getVarietatOliva();
							if (varietat != null && varietat.getNom() != null) {
								if (nom != "" && !nom.equalsIgnoreCase(varietat.getNom())) {
									nom = "mezcla";
									tipo = Long.valueOf("10");
									break;
								} else {
									nom = varietat.getNom();
									tipo = varietat.getIcona();
								}
							}
						}
					}
				}
				return tipo;
			}

			/**
			 * Comparator
			 */
			public int compareTo(Object po) {
				PartidaOliva partidaOliva = (PartidaOliva) po;
				if (this.data.compareTo(partidaOliva.getData()) == 0) {
					return this.numeroEntrada.compareTo(partidaOliva.getNumeroEntrada());
				} else {
					return this.data.compareTo(partidaOliva.getData());
				}
			} 
			]]>
		</meta>
		<primary-key>
			<generator class="native" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="nument" property="numeroEntrada"></column>
		<column name="posx" property="posicioX"></column>
		<column name="posy" property="posicioY"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_dpopao_fk">
			<set property="descomposicioPartidesOlives" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_descompo_partida_oliva">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
	</table>

	<table schema="public" name="oli_analitica">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				return sdf.format(this.data);
			}

			/**
			 * Comparator
			 */
			public int compareTo(Object a) {
				Analitica analitica = (Analitica)a;
				return this.data.compareTo(analitica.getData());
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="sennom" property="analisiSensorialNomLaboratori"></column>
		<column name="sendre" property="analisiSensorialDataRecepcio"></column>
		<column name="sendta" property="analisiSensorialDataTast"></column>
		<column name="sencvook" property="analisiSensorialVarietatOliValid"></column>
		<column name="senobs" property="analisiSensorialObservacions"></column>
		<column name="fisnom" property="analisiFisicoQuimicNomLaboratori"></column>
		<column name="fisdre" property="analisiFisicoQuimicDataRecepcio"></column>
		<column name="fisdin" property="analisiFisicoQuimicDataInici"></column>
		<column name="fisdfi" property="analisiFisicoQuimicDataFi"></column>
		<column name="fisaci" property="analisiFisicoQuimicAcidesa"></column>
		<column name="fisaciok" property="analisiFisicoQuimicAcidesaValid"></column>
		<column name="fisip" property="analisiFisicoQuimicIp"></column>
		<column name="fisipok" property="analisiFisicoQuimicIpValid"></column>
		<column name="fisk270" property="analisiFisicoQuimicK270"></column>
		<column name="fisk270ok" property="analisiFisicoQuimicK270Valid"></column>
		<column name="fisk232" property="analisiFisicoQuimicK232"></column>
		<column name="fisk232ok" property="analisiFisicoQuimicK232Valid"></column>
		<column name="fishum" property="analisiFisicoQuimicHumitat"></column>
		<column name="fishumok" property="analisiFisicoQuimicHumitatValid"></column>
		<column name="valid" property="valid"></column>
		<column name="desqua" property="desqualificatDiposit"></column>
		<column name="observ" property="observacions"></column>
		<column name="litresanalitzats" property="litresAnalitzats"></column>
		<column name="litresdesqualificats" property="litresDesqualificats"></column>
	</table>

	<table schema="public" name="oli_categoria_oli">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_lotcao_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_dipcao_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_edicao_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_sdicao_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_elaboracio">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.DecimalFormat</meta>
		<meta attribute="extra-import">java.util.Iterator</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				return sdf.format(this.data);
			}
		
			/**
			 * Devuelve una descripcion de total kilos de oliva que intervienen en la elaboracion
			 */
			public String getTotalQuilos() {
				DecimalFormat numberDecimalFormat = new DecimalFormat("###,###,##0.00");
				double total = 0;
				Set partidas = this.partidaOlivas;
				for (Iterator it = partidas.iterator(); it.hasNext();) {
					PartidaOliva partida = (PartidaOliva)it.next();
					if (partida.getDescomposicioPartidesOlives() != null) {
						Iterator desc = partida.getDescomposicioPartidesOlives().iterator();
						while (desc.hasNext()) {
							DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
							total += dpo.getKilos().doubleValue();
						}
					}
				}             
				return numberDecimalFormat.format(total);
			}

			/**
			 * Devuelve una descripcion de total kilos
			 */
			public String getNomVarietat(){
				String nom = "";
				Set partidas = this.partidaOlivas;
				for (Iterator it = partidas.iterator(); it.hasNext();) {
					PartidaOliva partida = (PartidaOliva)it.next();
					if (partida.getDescomposicioPartidesOlives() != null) {
						Iterator desc = partida.getDescomposicioPartidesOlives().iterator();
						while (desc.hasNext()) {
							DescomposicioPartidaOliva dpo = (DescomposicioPartidaOliva) desc.next();
							if (dpo.getDescomposicioPlantacio() != null) {
								DescomposicioPlantacio descompPlanta = dpo.getDescomposicioPlantacio();
								VarietatOliva varietat = descompPlanta.getVarietatOliva();
								if (varietat != null && varietat.getNom() != null) {
									if (nom != "" && !nom.equalsIgnoreCase(varietat.getNom())) {
										nom = "mezcla";
										break;
									} else {
										nom = varietat.getNom();
									}
								}
							}
                        }
						if(nom.equalsIgnoreCase("mezcla")){
							break;
						}
					}
				}              
				return nom;
			}

			/**
			 * Comparator
			 */
			public int compareTo(Object e) {
				Elaboracio elaboracion = (Elaboracio)e;
				if (this.data.compareTo(elaboracion.getData())== 0) {
					return this.numeroElaboracio.compareTo(elaboracion.getNumeroElaboracio());
				} else {
					return this.data.compareTo(elaboracion.getData());
				}             
			}

			/**
			 * Devuelve el nombre del establecimiento donde se realiza la elaboracion
			 */
			public String getEstablimentName() {
				String establimentName = "";
				Set partidas = this.partidaOlivas;
				for (Iterator it = partidas.iterator(); it.hasNext();) {
					PartidaOliva partida = (PartidaOliva) it.next();
					establimentName = partida.getZona().getEstabliment().getNom();
					break;
				}
				return establimentName;
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="numela" property="numeroElaboracio"></column>
		<column name="respon" property="responsable"></column>
		<column name="acides" property="acidesa"></column>
		<column name="temper" property="temperatura"></column>
		<column name="talmar" property="talcMarcaComercial"></column>
		<column name="taclot" property="talcLot"></column>
		<column name="talqua" property="talcQuantitat"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_ediela_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_epaela_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_entrada_diposit">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="acides" property="acidesa"></column>
		<column name="observ" property="observacions"></column>
	</table>

	<table schema="public" name="oli_entrada_lot">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="acides" property="acidesa"></column>
		<column name="dippro" property="dipositProcedencia"></column>
		<column name="numcon" property="numerosContraetiquetes"></column>
	</table>

	<table schema="public" name="oli_lot">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				return sdf.format(this.data);
			}

			/**
			 * Devuelve el tipo del icono de lote
			 */
			public Long getTipo() {
				Long tipo = Long.valueOf("5");	// por defecto botella cristal transparente
				if (this.etiquetatge != null && 
						this.etiquetatge.getTipusEnvas() != null &&
						this.etiquetatge.getTipusEnvas().getMaterialTipusEnvas() != null &&
						this.etiquetatge.getTipusEnvas().getMaterialTipusEnvas().getIcona() != null) {
					tipo = this.etiquetatge.getTipusEnvas().getMaterialTipusEnvas().getIcona();
				}
				return tipo;
			}

			/**
			 * Devuelve el aceite disponible en kilos
			 */
			public Double getDisponibleOliQuilos() {
				Double cantidad = null;
				if (this.getLitresEnvassats() != null) {
					//PASAMOS A KG
					cantidad = Double.valueOf(String.valueOf((Double.valueOf("0.916").doubleValue() * this.getLitresEnvassats().doubleValue())));
				}
				return cantidad;
			}

			/**
			 * Comparator
			 */
			public int compareTo(Object l) {
				Lot lote = (Lot)l;
				return this.data.compareTo(lote.getData());
			} 
			]]>
		</meta>
		<primary-key>
			<generator class="native" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="codlot" property="codiAssignat"></column>
		<column name="acides" property="acidesa"></column>
		<column name="litper" property="litresPerduts"></column>
		<column name="motper" property="motiuPerdua"></column>
		<column name="litaen" property="litresAEnvassar"></column>
		<column name="numbotini" property="numeroBotellesInicials"></column>
		<column name="litenv" property="litresEnvassats"></column>
		<column name="numini" property="numeroEtiquetaInicial"></column>
		<column name="numfin" property="numeroEtiquetaFinal"></column>
		<column name="posx" property="posicioX"></column>
		<column name="posy" property="posicioY"></column>
		<column name="observ" property="observacions"></column>
		<column name="numbotact" property="numeroBotellesActuals"></column>
		<column name="tancam" property="creatTancament"></column>
	</table>

	<table schema="public" name="oli_sortida_diposit">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				String fechaFormateada = "";
				if (this.data != null) {
					fechaFormateada = sdf.format(this.data);
				}
				return fechaFormateada;
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="dipositBySdiCoddor" property="dipositOrigen"></column>
		<column name="dipositBySdiCoddde" property="dipositDesti"></column>
		<column name="acides" property="acidesa"></column>
		<column name="observ" property="observacions"></column>
		<column name="ventdo" property="vendaTipusDocument"></column>
		<column name="venndo" property="vendaNumeroDocument"></column>
	</table>

	<table schema="public" name="oli_sortida_lot">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha de venta formateada
			 */
			public String getVendaDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				String fechaFormateada = "";
				if(this.vendaData != null ) {
					fechaFormateada = sdf.format(this.vendaData);
				}
				return fechaFormateada; 
			} 
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="accio" property="accioSortida"></column>
		<column name="venmot" property="vendaMotiu"></column>
		<column name="vendat" property="vendaData"></column>
		<column name="vendes" property="vendaDestinatari"></column>
		<column name="ventdo" property="vendaTipusDocument"></column>
		<column name="venndo" property="vendaNumeroDocument"></column>
		<column name="venobs" property="vendaObservacions"></column>
		<column name="candat" property="canviZonaData"></column>
		<column name="canobs" property="canviZonaObservacions"></column>
		<column name="vennbo" property="vendaNumeroBotelles"></column>
	</table>

	<table schema="public" name="oli_trasllat_diposit">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="extra-import">java.text.SimpleDateFormat</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve una fecha formateada
			 */
			public String getDataFormat() {
				SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
				return sdf.format(this.getData());
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="establimentByTdiCodede" property="establimentDesti"></column>
		<column name="establimentByTdiCodeor" property="establimentOrigen"></column>
		<column name="acctra" property="acceptatTrasllat"></column>
		<column name="retorn" property="retornatEstablimentOrigen"></column>
		<column name="trasll" property="traslladat"></column>
		<column name="dataalta" property="dataAlta"></column>
	</table>

	<table schema="public" name="oli_traza">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="establimentByTdiCodede" property="establimentDesti"></column>
		<column name="establimentByTdiCodeor" property="establimentOrigen"></column>
		<column name="acctra" property="acceptatTrasllat"></column>
		<column name="retorn" property="retornatEstablimentOrigen"></column>
		<foreign-key constraint-name="oli_sditra_fk">
			<set property="sortidesDiposits" />
		</foreign-key>
		<foreign-key constraint-name="oli_editra_fk">
			<set property="entradesDiposits" />
		</foreign-key>
		<foreign-key constraint-name="oli_slotra_fk">
			<set property="sortidesLots" />
		</foreign-key>
		<foreign-key constraint-name="oli_elotra_fk">
			<set property="entradesLots" />
		</foreign-key>
		<foreign-key constraint-name="oli_paotra_fk">
			<set property="partidesOlives" />
		</foreign-key>
		<foreign-key constraint-name="oli_elatra_fk">
			<set property="elaboracions" />
		</foreign-key>
		<foreign-key constraint-name="oli_anatra_fk">
			<set property="analitiques" />
		</foreign-key>
		<foreign-key constraint-name="oli_tditra_fk">
			<set property="trasllatsDiposits" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_varietat_oli">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<column name="observ" property="observacions"></column>
		<foreign-key constraint-name="oli_anavol_fk">
			<set exclude="true" />
		</foreign-key>
		<foreign-key constraint-name="oli_elavol_fk">
			<set exclude="true" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_categoria_informacio">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
		<foreign-key constraint-name="oli_infcai_fk">
			<set property="informacions" />
		</foreign-key>
	</table>

	<table schema="public" name="oli_informacio">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<meta attribute="class-code"><![CDATA[
			/**
			 * Devuelve true si tiene documentos
			 */
			public boolean getTeDocuments() {
			   return documents.size() > 0;
			}
			]]>
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
	</table>

	<table schema="public" name="oli_document">
		<meta attribute="class-description">
			Javadoc de les clases Model de Gest Oli
			@author
			Oriol Barnes Cruz (obarnes@at4.net)
		</meta>
		<primary-key>
			<generator class="identity" />
		</primary-key>
		<column name="codi" property="id"></column>
	</table>

</hibernate-reverse-engineering>